#!/usr/bin/env bash
#
# Run all dotfiles installers.

mage=`tput setaf 5`
green=`tput setaf 1`
reset=`tput sgr0`

# Output messages in magenta
function msg {
  echo "${mage}$1${reset}"
}

function doing {
  echo "${green}> $1...${reset}"
}

set -e

cd "$(dirname $0)"/..

# ############################
# VIM
# ############################

doing 'Checking your Linux flavor'

response=`uname -a`
if [[ $response == *"ARCH"* ]]; then
  system='arch'
  msg "You're runningÂ ArchLinux. KISS!"
elif [[ $response == *"Ubuntu"* ]]; then
  system='ubuntu'
  msg "Your're running Ubuntu, mate."
else
  system=''
  msg "Unknown Linux flavor here!"
fi

# Add spell check dictionaries
if [ ! -f $HOME/.vim/spell/fr.utf-8.spl ]; then
  doing 'Installing Spell Checking files'
  cp -R $HOME/.dotfiles/vim/spell $HOME/.vim/spell
fi

# Install vim-plug if necessary
if [ ! -f $HOME/.vim/autoload/plug.vim ]; then
  doing 'Installing Vim-Plug'
  curl -fLo $HOME/.vim/autoload/plug.vim --create-dirs \
      https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi

msg "Do you want to install and update your vim plugins?"
select yn in "Yes" "No"; do
  case $yn in
    Yes ) doing 'Installing and updating vim plugins';
      vim +PlugUpdate +qall
      break;;
    No ) exit;;
  esac
done
